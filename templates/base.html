{% load static %}
<!doctype html>
<html lang="ko">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
    <link rel="stylesheet" type="select/css" href="{% static 'style.css' %}">

    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"></script>

    <!-- CKEDITOR -->
    <script type="text/javascript" src="{% static 'ckeditor/ckeditor-init.js' %}"></script>
    <script type="text/javascript" src="{% static 'ckeditor/ckeditor/ckeditor.js' %}"></script>

    <!-- fullcalendar CDN -->
    <link href='/static/main.css' rel='stylesheet' />
    <script src='/static/main.js'></script>

    <!-- calendar popup utils -->
    <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.js"></script>
    <script src="https://unpkg.com/tippy.js@6"></script>


    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            height: '700px', // calendar 높이 설정
            expandRows: true, // 화면에 맞게 높이 재설정
            slotMinTime: '08:00', // Day 캘린더에서 시작 시간
            slotMaxTime: '20:00', // Day 캘린더에서 종료 시간
            // 해더에 표시할 툴바
            headerToolbar: {
              left: 'prev,next today',
              center: 'title',
              right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
            },
            initialView: 'dayGridMonth', // 초기 로드 될때 보이는 캘린더 화면(기본 설정: 달)
            navLinks: true, // 날짜를 선택하면 Day 캘린더나 Week 캘린더로 링크
            editable: false, // 수정 가능?
            selectable: true, // 달력 일자 드래그 설정가능
            nowIndicator: true, // 현재 시간 마크
            dayMaxEvents: true, // 이벤트가 오버되면 높이 제한 (+ 몇 개식으로 표현)
            locale: 'ko', // 한국어 설정
            eventDidMount: function(info) {
                tippy(info.el, {
                content:  info.event.extendedProps.description,//이벤트 디스크립션을 툴팁으로 가져옵니다.
                });
            },

            events: [
                {% for event in vacations %}
                    {
                    groupId : "{{event.id}}",
                    backgroundColor: '{{event.color}}',
                    borderColor : '{{event.color}}',
                    title: "{{event.title}}",
                    start: '{{event.start}}',
                    end: '{{event.end}}',
                    allDay : {{event.allday}},
                    description : '{{event.description}}',
                    overlap : 'false'
                    },
                {% endfor %}
                {% for event in tasks %}
                    {


                    groupId : "{{event.id}}",
                    backgroundColor: '{{event.color}}',
                    borderColor : '{{event.color}}',
                    title: "{{ event.title}}",
                    start: '{{ event.start }}',
                    end: '{{ event.end}}',
                    allDay : {{event.allday}},
                    description : '{{event.description}}',
                    overlap : 'false'

                    },
                {% endfor %}
                ],
                slotEventOverlap : false,
                displayEventTime: false


            });

        calendar.render();
      });

    </script>
    <title> 게시판 </title>
</head>
<body>

<!-- Navigation bar -->
{% include "nav_cat.html" %}

<!-- Contents -->
{% block content %}
{% endblock %}




<!-- JavaScript Block-->
{% block script %}
{% endblock %}

</body>
</html>